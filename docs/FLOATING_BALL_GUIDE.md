# 悬浮球功能使用说明

## 🌟 功能概述

悬浮球是Inputist v2.5.0的全新功能，提供便捷的输入法快速切换体验。通过一个小巧的悬浮按钮，您可以在任何界面快速切换到Inputist输入法或返回到之前使用的输入法。

## ✨ 主要特性

- **智能切换逻辑**：根据当前输入法状态自动判断切换目标
- **记忆功能**：自动记住上一个使用的输入法
- **拖拽定位**：支持拖拽悬浮球到屏幕任意位置
- **自动贴边**：拖拽结束后自动贴靠屏幕边缘
- **状态指示**：通过不同图标和透明度显示当前状态
- **位置记忆**：记住悬浮球的最后位置

## 🚀 使用步骤

### 1. 授予权限
1. 打开Inputist应用
2. 在主界面找到"悬浮球设置"卡片
3. 点击"授予悬浮权限"按钮
4. 在系统设置页面中允许Inputist显示在其他应用上层

### 2. 启用悬浮球
1. 返回Inputist应用
2. 开启"启用悬浮球"开关
3. 悬浮球将立即出现在屏幕上

### 3. 使用悬浮球
- **点击切换**：单击悬浮球即可切换输入法
  - 当前非Inputist → 切换到Inputist
  - 当前是Inputist → 切换到上一个输入法
- **拖拽移动**：长按并拖拽可移动悬浮球位置
- **自动贴边**：释放后悬浮球会自动贴向最近的屏幕边缘

## 🎨 视觉指示

### 悬浮球状态
- **激活状态**（当前为Inputist输入法）
  - 图标：白色键盘图标 + 绿色活跃指示点
  - 透明度：100%
  
- **非激活状态**（当前为其他输入法）
  - 图标：半透明键盘图标 + 黄色切换箭头
  - 透明度：80%

### 悬浮球设计
- **尺寸**：56dp × 56dp
- **背景**：渐变圆形背景（#FF4081 到 #FF6B9D）
- **阴影**：8dp elevation提供立体感
- **边框**：2dp半透明白色描边

## ⚙️ 高级功能

### 开机自启动
如果启用了悬浮球功能，应用会在设备重启后自动启动悬浮球服务（需要相应权限）。

### 位置记忆
悬浮球会记住您最后设置的位置，重启应用后会在相同位置显示。

### 权限管理
- **SYSTEM_ALERT_WINDOW**：悬浮窗显示权限
- **RECEIVE_BOOT_COMPLETED**：开机自启动权限（可选）

## 🔧 故障排除

### 悬浮球无法显示
1. 确认已授予悬浮权限
2. 检查悬浮球开关是否开启
3. 重启应用或重新开启悬浮球功能

### 无法切换输入法
1. 确认Inputist输入法已在系统中启用
2. 检查是否有其他输入法可供切换
3. 如果自动切换失败，会显示系统输入法选择器

### 悬浮球位置异常
1. 拖拽悬浮球到合适位置
2. 位置会自动保存
3. 如需重置，可以禁用后重新启用悬浮球

## 📱 兼容性

- **最低版本**：Android 7.0 (API 24)
- **目标版本**：Android 15 (API 35)
- **推荐**：Android 8.0+ 以获得最佳体验

## 🔒 隐私说明

悬浮球功能不会收集或传输任何用户数据，所有操作均在本地完成。权限仅用于：
- 显示悬浮球界面
- 切换系统输入法
- 开机自启动服务（可选）

---

*如有问题或建议，欢迎在GitHub仓库提交Issue。*
